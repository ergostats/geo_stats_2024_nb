<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Principios de probabilidad</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="m3_probabilidad_files/libs/clipboard/clipboard.min.js"></script>
<script src="m3_probabilidad_files/libs/quarto-html/quarto.js"></script>
<script src="m3_probabilidad_files/libs/quarto-html/popper.min.js"></script>
<script src="m3_probabilidad_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="m3_probabilidad_files/libs/quarto-html/anchor.min.js"></script>
<link href="m3_probabilidad_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="m3_probabilidad_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="m3_probabilidad_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="m3_probabilidad_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="m3_probabilidad_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Principios de probabilidad</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="definiciones-de-probabilidad" class="level3">
<h3 class="anchored" data-anchor-id="definiciones-de-probabilidad">1. Definiciones de Probabilidad</h3>
<p>En la estadística, la probabilidad se define como una medida de la certeza de que un evento ocurra. Se denota comúnmente por<span class="math inline">\(P(A)\)</span>, donde<span class="math inline">\(A\)</span> es el evento de interés. La probabilidad de cualquier evento se encuentra en el intervalo<span class="math inline">\([0, 1]\)</span>, donde 0 indica la imposibilidad del evento y 1 indica certeza absoluta.</p>
<section id="dominio-de-la-función" class="level4">
<h4 class="anchored" data-anchor-id="dominio-de-la-función">Dominio de la Función</h4>
<p>El dominio de una función de probabilidad es el conjunto de todos los posibles resultados de un experimento aleatorio. Por ejemplo, si lanzamos una moneda, el dominio es<span class="math inline">\(\{cara, cruz\}\)</span>.</p>
</section>
<section id="función-de-distribución" class="level4">
<h4 class="anchored" data-anchor-id="función-de-distribución">Función de Distribución</h4>
<p>La función de distribución, también conocida como función de probabilidad, asigna a cada posible resultado un valor de probabilidad. Para una variable aleatoria discreta<span class="math inline">\(X\)</span>, la función de distribución de probabilidad<span class="math inline">\(p(x)\)</span> está definida como: <span class="math display">\[p(x) = P(X = x)\]</span></p>
</section>
<section id="distribución-acumulada" class="level4">
<h4 class="anchored" data-anchor-id="distribución-acumulada">Distribución Acumulada</h4>
<p>La función de distribución acumulada (FDA), denotada como<span class="math inline">\(F(x)\)</span>, es la probabilidad de que la variable aleatoria<span class="math inline">\(X\)</span> tome un valor menor o igual a<span class="math inline">\(x\)</span>. Matemáticamente, se expresa como: <span class="math display">\[F(x) = P(X \leq x)\]</span></p>
</section>
</section>
<section id="distribuciones-más-conocidas" class="level3">
<h3 class="anchored" data-anchor-id="distribuciones-más-conocidas">2. Distribuciones Más Conocidas</h3>
<p>A continuación, se presenta una tabla que resume algunas de las distribuciones más comunes en estadística, incluyendo sus usos, la fórmula de la media y la varianza.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 16%">
<col style="width: 30%">
<col style="width: 26%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th>Nombre de la Distribución</th>
<th>Usos Comunes</th>
<th>Fórmula de la Media</th>
<th>Fórmula de la Varianza</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Normal</td>
<td>Datos continuos, fenómenos naturales</td>
<td><span class="math inline">\(\mu\)</span></td>
<td><span class="math inline">\(\sigma^2\)</span></td>
</tr>
<tr class="even">
<td>Poisson</td>
<td>Número de eventos en un intervalo de tiempo/espacio</td>
<td><span class="math inline">\(\lambda\)</span></td>
<td><span class="math inline">\(\lambda\)</span></td>
</tr>
<tr class="odd">
<td>Uniforme</td>
<td>Eventos igualmente probables</td>
<td><span class="math inline">\(\frac{a + b}{2}\)</span></td>
<td><span class="math inline">\(\frac{(b - a)^2}{12}\)</span></td>
</tr>
<tr class="even">
<td>Binomial</td>
<td>Número de éxitos en<span class="math inline">\(n\)</span> ensayos</td>
<td><span class="math inline">\(np\)</span></td>
<td><span class="math inline">\(np(1-p)\)</span></td>
</tr>
<tr class="odd">
<td>Geométrica</td>
<td>Ensayos hasta el primer éxito</td>
<td><span class="math inline">\(\frac{1}{p}\)</span></td>
<td><span class="math inline">\(\frac{1-p}{p^2}\)</span></td>
</tr>
<tr class="even">
<td>Exponencial</td>
<td>Tiempo entre eventos</td>
<td><span class="math inline">\(\frac{1}{\lambda}\)</span></td>
<td><span class="math inline">\(\frac{1}{\lambda^2}\)</span></td>
</tr>
<tr class="odd">
<td>Beta</td>
<td>Proporciones y probabilidades</td>
<td><span class="math inline">\(\frac{\alpha}{\alpha + \beta}\)</span></td>
<td><span class="math inline">\(\frac{\alpha \beta}{(\alpha + \beta)^2(\alpha + \beta + 1)}\)</span></td>
</tr>
<tr class="even">
<td>Gamma</td>
<td>Tiempo hasta la ocurrencia de<span class="math inline">\(k\)</span> eventos</td>
<td><span class="math inline">\(\alpha \beta\)</span></td>
<td><span class="math inline">\(\alpha \beta^2\)</span></td>
</tr>
</tbody>
</table>
</section>
<section id="el-teorema-de-bayes" class="level3">
<h3 class="anchored" data-anchor-id="el-teorema-de-bayes">3. El Teorema de Bayes</h3>
<p>El Teorema de Bayes es una herramienta fundamental en la teoría de probabilidad, que permite actualizar las probabilidades iniciales (a priori) basadas en nueva información (evidencia).</p>
<p>Este teorema se expresa como:</p>
<p><span class="math display">\[P(A|B) = \frac{P(B|A) \cdot P(A)}{P(B)}\]</span></p>
<p>Donde<span class="math inline">\(P(A|B)\)</span> es la probabilidad de que ocurra<span class="math inline">\(A\)</span> dado que<span class="math inline">\(B\)</span> ha ocurrido,<span class="math inline">\(P(B|A)\)</span> es la probabilidad de que ocurra<span class="math inline">\(B\)</span> dado que<span class="math inline">\(A\)</span> ha ocurrido,<span class="math inline">\(P(A)\)</span> es la probabilidad a priori de<span class="math inline">\(A\)</span>, y<span class="math inline">\(P(B)\)</span> es la probabilidad total de<span class="math inline">\(B\)</span>.</p>
<p>La probabilidad conjunta de dos eventos<span class="math inline">\(A\)</span> y<span class="math inline">\(B\)</span> está dada por:</p>
<p><span class="math display">\[P(A \cap B) = P(B|A) \cdot P(A)\]</span></p>
<p>Para la suma de probabilidades de eventos mutuamente excluyentes<span class="math inline">\(A_1, A_2, \ldots, A_n\)</span>, la fórmula es:</p>
<p><span class="math display">\[P(B) = \sum_{i=1}^{n} P(B|A_i) \cdot P(A_i)\]</span></p>
<p>Estas fórmulas son cruciales para realizar inferencias basadas en el teorema de Bayes, permitiendo ajustar nuestras creencias sobre la ocurrencia de eventos a medida que se obtiene nueva información.</p>
<p>Claro, vamos a desglosar el proceso de cálculo de la probabilidad posterior usando el Teorema de Bayes, siguiendo la lógica del ejemplo y explicándolo de manera sencilla.</p>
</section>
<section id="la-temperatura-en-pichincha" class="level3">
<h3 class="anchored" data-anchor-id="la-temperatura-en-pichincha">La temperatura en Pichincha</h3>
<p>Tenemos datos de temperatura en Pichincha, y queremos predecir la temperatura en un punto específico para hoy, basándonos en la temperatura en ese punto el día anterior. Supongamos que:</p>
<p>-<span class="math inline">\(A\)</span> es la temperatura en el punto específico hoy. -<span class="math inline">\(B\)</span> es la temperatura en ese punto ayer.</p>
</section>
<section id="paso-1-probabilidad-a-priori-pa" class="level3">
<h3 class="anchored" data-anchor-id="paso-1-probabilidad-a-priori-pa">Paso 1: Probabilidad a Priori (<span class="math inline">\(P(A)\)</span>)</h3>
<p>La probabilidad a priori (<span class="math inline">\(P(A)\)</span>) es nuestra mejor estimación de la temperatura de hoy sin considerar la información del día anterior. Esta probabilidad se basa en datos históricos. Por ejemplo, si históricamente las temperaturas siguen una distribución normal con una media (<span class="math inline">\(\mu\)</span>) de 20 grados y una desviación estándar (<span class="math inline">\(\sigma\)</span>) de 5 grados, entonces la probabilidad de que la temperatura de hoy sea<span class="math inline">\(A\)</span> está dada por:</p>
<p><span class="math display">\[P(A) = \frac{1}{\sigma \sqrt{2\pi}} \exp\left(-\frac{(A - \mu)^2}{2\sigma^2}\right)\]</span></p>
</section>
<section id="paso-2-probabilidad-condicional-pba" class="level3">
<h3 class="anchored" data-anchor-id="paso-2-probabilidad-condicional-pba">Paso 2: Probabilidad Condicional (<span class="math inline">\(P(B|A)\)</span>)</h3>
<p>La probabilidad condicional (<span class="math inline">\(P(B|A)\)</span>) es la probabilidad de que la temperatura ayer (<span class="math inline">\(B\)</span>) sea lo que fue, dado que la temperatura hoy (<span class="math inline">\(A\)</span>) es lo que estamos tratando de predecir. Utilizamos una relación basada en datos históricos. Para simplificar, asumimos que si la temperatura de hoy es<span class="math inline">\(A\)</span>, la temperatura de ayer también sigue una distribución normal con media<span class="math inline">\(A\)</span> y la misma desviación estándar<span class="math inline">\(\sigma\)</span>.</p>
<p><span class="math display">\[P(B|A) = \frac{1}{\sigma \sqrt{2\pi}} \exp\left(-\frac{(B - A)^2}{2\sigma^2}\right)\]</span></p>
</section>
<section id="paso-3-probabilidad-total-pb" class="level3">
<h3 class="anchored" data-anchor-id="paso-3-probabilidad-total-pb">Paso 3: Probabilidad Total (<span class="math inline">\(P(B)\)</span>)</h3>
<p>La probabilidad total (<span class="math inline">\(P(B)\)</span>) es la probabilidad de que la temperatura de ayer sea<span class="math inline">\(B\)</span> sin importar la temperatura de hoy. Esto también se basa en datos históricos y sigue la misma distribución normal con media histórica<span class="math inline">\(\mu\)</span> y desviación estándar<span class="math inline">\(\sigma\)</span>.</p>
<p><span class="math display">\[P(B) = \frac{1}{\sigma \sqrt{2\pi}} \exp\left(-\frac{(B - \mu)^2}{2\sigma^2}\right)\]</span></p>
</section>
<section id="paso-4-aplicación-del-teorema-de-bayes" class="level3">
<h3 class="anchored" data-anchor-id="paso-4-aplicación-del-teorema-de-bayes">Paso 4: Aplicación del Teorema de Bayes</h3>
<p>Usamos el Teorema de Bayes para actualizar nuestra probabilidad a priori (<span class="math inline">\(P(A)\)</span>) en función de la información del día anterior (<span class="math inline">\(B\)</span>):</p>
<p><span class="math display">\[P(A|B) = \frac{P(B|A) \cdot P(A)}{P(B)}\]</span></p>
<p>Esta es nuestra probabilidad posterior (<span class="math inline">\(P(A|B)\)</span>), la probabilidad de que la temperatura hoy sea<span class="math inline">\(A\)</span> dado que la temperatura ayer fue<span class="math inline">\(B\)</span>.</p>
</section>
<section id="ejemplo-numérico" class="level3">
<h3 class="anchored" data-anchor-id="ejemplo-numérico">Ejemplo Numérico</h3>
<p>Supongamos que: - La media histórica (<span class="math inline">\(\mu\)</span>) es 20 grados. - La desviación estándar (<span class="math inline">\(\sigma\)</span>) es 5 grados. - La temperatura ayer (<span class="math inline">\(B\)</span>) fue 22 grados. - Queremos calcular la probabilidad de que la temperatura hoy (<span class="math inline">\(A\)</span>) sea 21 grados.</p>
<ol type="1">
<li><p><strong>Probabilidad a Priori (<span class="math inline">\(P(A = 21)\)</span>)</strong>: <span class="math display">\[P(A = 21) = \frac{1}{5 \sqrt{2\pi}} \exp\left(-\frac{(21 - 20)^2}{2 \cdot 5^2}\right)\]</span></p></li>
<li><p><strong>Probabilidad Condicional (<span class="math inline">\(P(B = 22|A = 21)\)</span>)</strong>: <span class="math display">\[P(B = 22|A = 21) = \frac{1}{5 \sqrt{2\pi}} \exp\left(-\frac{(22 - 21)^2}{2 \cdot 5^2}\right)\]</span></p></li>
<li><p><strong>Probabilidad Total (<span class="math inline">\(P(B = 22)\)</span>)</strong>: <span class="math display">\[P(B = 22) = \frac{1}{5 \sqrt{2\pi}} \exp\left(-\frac{(22 - 20)^2}{2 \cdot 5^2}\right)\]</span></p></li>
<li><p><strong>Probabilidad Posterior (<span class="math inline">\(P(A = 21|B = 22)\)</span>)</strong>: <span class="math display">\[P(A = 21|B = 22) = \frac{P(B = 22|A = 21) \cdot P(A = 21)}{P(B = 22)}\]</span></p></li>
</ol>
<p>Al calcular cada uno de estos valores usando las fórmulas de la distribución normal, puedes obtener la probabilidad posterior.</p>
</section>
<section id="implementación-en-r" class="level3">
<h3 class="anchored" data-anchor-id="implementación-en-r">Implementación en R</h3>
<p>A continuación, se muestra cómo calcular esto en R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Definir los parámetros</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>sigma <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="dv">21</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="dv">22</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Probabilidad a priori</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>prior_prob <span class="ot">&lt;-</span> <span class="fu">dnorm</span>(A, <span class="at">mean =</span> mu, <span class="at">sd =</span> sigma)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Probabilidad condicional</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>conditional_prob <span class="ot">&lt;-</span> <span class="fu">dnorm</span>(B, <span class="at">mean =</span> A, <span class="at">sd =</span> sigma)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Probabilidad total</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>total_prob <span class="ot">&lt;-</span> <span class="fu">dnorm</span>(B, <span class="at">mean =</span> mu, <span class="at">sd =</span> sigma)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Probabilidad posterior</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>posterior_prob <span class="ot">&lt;-</span> (conditional_prob <span class="sc">*</span> prior_prob) <span class="sc">/</span> total_prob</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>posterior_prob</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.08304468</code></pre>
</div>
</div>
<p>Este código calculará la probabilidad posterior de que la temperatura hoy sea 21 grados dado que ayer fue 22 grados, usando el Teorema de Bayes.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>